
{
  "stores": {
    "REDIS_SCHEDULER_STORE": {
      "redis_store": {
        "addresses": [
            "redis://127.0.0.1:6379/"
        ],
        "experimental_pub_sub_channel": "scheduler_channel"
      }
    },
    "AC_MAIN_STORE": {
      "redis_store": {
        "addresses": [
            "redis://127.0.0.1:6379/"
        ],
        "key_prefix": "ac"
      }
    },
    "CAS_MAIN_STORE": {
      "redis_store": {
        "addresses": [
            "redis://127.0.0.1:6379/"
        ],
        "key_prefix": "cas"
      }
    },
    "WORKER_FAST_SLOW_STORE": {
      "fast_slow": {
        "fast": {
          "filesystem": {
            "content_path": "/tmp/nativelink/data-worker-test-${WORKER_ENDPOINT_PORT}/content_path-cas",
            "temp_path": "/tmp/nativelink/data-worker-test-${WORKER_ENDPOINT_PORT}/tmp_path-cas",
            "eviction_policy": {
              "max_bytes": 10000000000
            }
          }
        },
        "slow": {
          "ref_store": {
            "name": "CAS_MAIN_STORE"
          }
        }
      }
    }
  },
  "schedulers": {
    "SCHEDULER": {
      "simple": {
        "supported_platform_properties": {
          "cpu_count": "minimum"
        },
        "experimental_backend": {
          "redis": {
            "redis_store": "REDIS_SCHEDULER_STORE"
          }
        }
      }
    }
  },
  "workers": [{
    "local": {
      "worker_api_endpoint": {
        "uri": "grpc://127.0.0.1:${WORKER_ENDPOINT_PORT}"
      },
      "cas_fast_slow_store": "WORKER_FAST_SLOW_STORE",
      "upload_action_result": {
        "ac_store": "AC_MAIN_STORE"
      },
      "work_directory": "/tmp/nativelink/work${WORKER_ENDPOINT_PORT}",
      "platform_properties": {
        "cpu_count": {
          "values": ["1"]
        }
      }
    }
  }],
  "servers": [{
    "listener": {
      "http": {
        "socket_address": "0.0.0.0:${WORKER_ENDPOINT_PORT}"
      }
    },
    "services": {
      "experimental_prometheus": {
        "path": "/metrics"
      },
      "worker_api": {
        "scheduler": "SCHEDULER"
      },
      "admin": {},
      "health": {}
    }
  }]
}
